# Команды терминала Linux
## Работа с файлами
**pwd**  
**p**rint **w**ork **d**irectory  
Вывести на экран текущую директорию    

**ls**  
**l**ist directory content**s**  
Список файлов в директории  
*-l* - подробные данные о файлах  
*-h* - размеры файлов в удобном формате  
Можно применить сортировку ***--sort=[вид_сортировки] -l***:  
```bash
ls --sort=size -l .
ls --sort=time -l ~/
```

**mkdir**   
**m**a**k**e **dir**ectories  
Создает указанную директорию  
*-p* - создаст несуществующие директории по пути  
Можно использовать *{}* для создания сразу нескольких директорий:  
```mkdir {dir1,dir2}```  
```mkdir dir{5..8}```  
Примеры использования {}:
```bash
echo {0..10} # числа от 0 до 10
echo {10..0} # числа от 10 до 0
echo {10..0..2} # каждое второе число от 10 до 0 (10 8 6 4 2 0)
echo {z..a..2} # каждая вторая буква от z до a
echo {a..z}{a..z} # каждая пара от a до z (aa ab ac ad ... zw zx zy zz)
```

**rmdir**  
Удаляет указанную директорию  

**touch**  
Создает файл  
*-t* - позволяет переопределить дату/время создания файла  
Можно использовать {} для создания сразу нескольких файлов:  
```touch {file1,file2}.txt```

**cd**
**c**hange **d**irectory    
Перейти в директорию  
```bash
cd ~ # домашняя директория
cd .. # на уровень выше
cd - # предыдущая директория
```

**rm**  
**r**e**m**ove  
Удалить файл  
*-r* - удалить директорию и вложенные файлы  
*-f* - не задавать вопросов  
Можно использовать *[]* (glob, wild card) для поиска файлов по шаблону:  
```bash
rm file[1-8] # удалит файлы file1, file2, file3 ... file8
rm file* # удалит все файлы, начинающиеся на file
rm file[12] # удалит файлы file1, file2
rm [Cc]hange[Ll]og # удалит файлы Changelog, ChangeLog, changeLog и changelog
rm [A-Za-z]* # удалит все файлы, начинающиеся с большой или маленькой латинской буквы
```
\* - сколько угодно символов, включая ничего  
? - один любой символ  
! - отрицание


**cp** путь_изначальный путь_новый  
**c**o**p**y  
Скопировать файл  
*-r* - скопировать директорию и вложенные файлы  
Можно использовать *{}* для копирования сразу нескольких файлов

**mv**  
**m**o**v**e  
Переместить директорию или файл  
Данная утилита также может использоваться для переименования  

**file <путь к файлу>** - информация о файле, определяет тип файла  
Использует файл со списком "магических последовательностей байт", содержащий шаблоны для распознавания типов данных (который расположен по пути /usr/share/file/magic)  
-s - отображает информацию о специфических файлах, таких как файлы из директорий /dev и /proc

**rename** - переименование файлов  
В дистрибутивах Debian/Ubuntu использует регулярные выражения:
```bash
rename 's/\.txt/\.png/' *.txt # заменить расширение txt на png у всех файлов с расширением txt
rename 's/file/document/' *.png # заменить первое вхождение слова file на document в файлах с расширением png
```
В CentOS/RHEL/Fedora используется другой синтаксис:
```bash
rename .conf .backup *.conf # заменит расширение conf на backup у всех файлов с расширением conf
rename one ONE * # заменить one на ONE у всех файлов
```

## Ссылки
**ln <путь к файлу> <путь к ссылке>** - создать жесткую ссылку на файл  
Создать жесткую ссылку на директорию нельзя    
*-s* - создать символическую ссылку  

## Права доступа   
**chmod**  
Изменить права для файла  

## Процессы  
**jobs**  
Выводит список фоновых процессов  

**fg** номер_процесса  
**f**ore**g**round  
Переводит процесс на передний план  

**bg** номер_процесса  
**b**ack**g**round  
Переводит процесс на задний план
Можно запустить команду в фоновом режиме, указав в конце амперсанд (&)  

**ps**  
Отображает запущенные процессы под текущим пользователем    

**top**  
Отображает процессы в реальном времени  
*-u <имя пользователя>* - процессы пользователя  

**kill** <номер процесса>
Завершить процесс  
*-9* - "убить" процесс  

**free**  
Информация об оперативной памяти  

**nproc**  
Количество ядер процессора  

**lscpu**  
Детальная информация о процессоре  

## Ввод-вывод  
**cat**  
Вывод содержимого файла на экран  

**less**
Вывод содержимого файла на экран с возможностью навигации  
q - выход  
/ - поиск  
g - в начало  
G - в конец  

### Перенаправление ввода-вывода  
**<** - ввод (*stdin*) из файла  
**>** - вывод (*stdout*) в файл, с перезаписью  
**>>** - вывод (*stdout*) в файл, без перезаписи  
**2>** - вывод (*stderr*) в файл, с перезаписью  
**2>>** - вывод (*stderr*) в файл, без перезаписи  
**&>** - вывод (*stdout*, *stderr*) в файл, с перезаписью  
**&>>** - вывод (*stdout*, *stderr*) в файл, без перезаписи  
Перенаправление одного потока в другой:  
2>&1 - *stderr* в *stdout*  
1>&2 - *stdout* в *stderr*  

### Конвейер (pipe)
Символ **|** передает *stdout* следующей программе в качестве *stdin*  

## Скачивание файлов  
**wget**  
Скачивает файл по ссылке  
По-умолчанию файл сохраняется в текущей директории  
*-P* - путь к сохраняемому файлу  
*-O* - путь и имя сохраняемого файла  
*-c* - докачать файл в случае обрыва связи  
*--spider* - проверить доступность файла  
*-i текстовый_файл* - скачать несколько файлов по ссылкам  
*-r, --recursive* - реккурсивное скачивание файлов  
*-l* - глубина реккурсивного скачивания  
*-A acclist* - паттерн имени файла, который необходимо скачать  

## Работа с архивами  
**unzip**  
Распаковать архив .zip  

**gunzip**  
Распаковать архив .gz, *сам архив удалить* 

**zip** *архив.zip* *файл1* *файл2*...  
Запаковать файлы и/или папки в архив .zip  
 
**gzip** *файл*  
Запаковать файл в архив .gz, *исходный файл удалить*  

### tar + gzip

**tar** -cvf *архив.tar* *файл1* *файл2*...  
Запаковать файлы и/или папки в архив .tar (без сжатия)  
**gzip** *архив.tar*  
Запаковать файл в архив .tar в архив.tar.gz, *исходный архив.tar удалить*  

**tar** -c**z**vf *архив.tar.gz* *файл1* *файл2*...  
Запаковать файлы и/или папки в архив .tar.gz (с сжатием при помощи gzip)  

**tar** -xvf *архив.tar*  
Распаковать архив .tar  

**tar** -x**z**vf *архив.tar.gz*  
Распаковать архив .tar.gz (с использованием gunzip)  

### bz2  

**bzip2** *файл*  
Запаковать файл в архив .bz2  

**bunzip2** *файл.bz2*  
Распаковать архив .bz2  

**tar** -c**j**vf *архив.tar.bz2* *файл1* *файл2*...  
Запаковать файлы и/или папки в архив .tar.bz2  

**tar** -x**j**vf *архив.tar.bz2*  
Распаковать архив .tar.bz  

## Поиск файлов  

**find** <папка> -name "имя файла"  
Найти указанный файл в папке  
Опции:
-iname "<имя файла>" - не учитывать регистр  
-path "<путь>" - найти указанный путь  
-size <размер> - выводить файлы указанного размера  
-maxdepth <число> - искать не более чем на заданном количестве уровней вниз  
-mindepth <число> - искать, начиная с заданного уровня  

**grep** "строка" <файл>  
Найти строку в файле  
*-c* - посчитать количество вхождений  
*-r* - реккурсивный поиск  
*-l* - список файлов с этой строкой  
*-L* - список файлов, где этой строки нет  
*-n* - выводить номер строки в файле  
*-m* - не искать дальше заданного числа вхождений (для каждого файла)  
-A <число> - выводить заданное число строк, находящихся после найденной строки  
-B <число> - выводить заданное число строк, находящихся до найденной строки  
-C <число> - выводить заданное число строк, находящихся вокруг найденной строки
-E <выражение> - поиск по регулярному выражению  

**sed** 'инструкция' - изменение строк 
*s*tream *ed*itor 
По-умолчанию принимает данные из stdin, обрабатывает их построчно и выводит в stdout  
```bash
cat <файл> | sed 'инструкция'
sed 'инструкция' <файл>
```
Для записи в файл:  
- \> <файл> - стандартное перенаправление  
- -i, --in-place - перезаписать входной файл  
Инструкция замены:  
```sed 's/<что заменить (можно использовать regexp)>/<на что заменить>/g'```
Инструкция вывода:  
```bash
sed -n '2,4p' # выведет строки со второй по четвертую
sed '2,4d' # выведет все строки, кроме со второй по четвертую
```

## Удаленный доступ  

### ssh  

**ssh** <имя пользователя>@<адрес сервера> -p <порт>  
Доступ на сервер по ssh

**ssh-keygen**  
Генерация ключа для ssh  

**ssh-add**  
Добавляет приватный ключ в ssh-agent  

**scp** -P <порт> *откуда, напр. <имя пользователя>@<адрес сервера>:<путь на сервере>* *куда, напр. локальный путь*  
Копирование файлов по ssh  

## Установка программ  

**apt-get** *install* <программа>  
Установить программу  
*--only-upgrade* - обновить программу

**apt-get** *remove* <программа>  
Удалить программу  

**apt-get** *update*  
Обновить ссылки на пакеты  

**apt-get** *upgrade*  
Обновление установленных пакетов  

## Менеджер вкладок *tmux*

**tmux**  
Запустить менеджер вкладок  
Ctrl + B - перейти в режим команд  
Команды:
- C - создать новую вкладку
- <цифра> - перейти в указанную вкладку  
- N/P - перейти в следущую/предыдущую вкладку
- X - закрыть вкладку  
- D - временно выйти из tmux  
- PgUp - перейти в режим просмотра истории  
- " - разделить вкладку горизонтально  
- % - разделить вкладку вертикально  
- <стрелки> - перемещение между разделенными вкладками  

**tmux attach / tmux a**  
Вернуться в tmux  

**tmux list-sessions**  
Посмотреть список запущенных tmux  

## Прочие команды
wc - посчитать что-то в файле  
```wc [что считаем] <путь>```  
-l - количество строк  
-w - количество слов  
-m - количество символов  

diff - сравнить файлы/директории  
```diff [-q -r] <путь1> <путь2>```  

du - узнать, сколько места файл/директория занимает на диске  
```du [--max-depth <глубина> -h] <путь>```  

df - узнать свободное место на диске  
```df [-h]```  

Вывести часть файла:  
```head [-n <число строк>] <путь>```  
```tail [-n <число строк>] <путь>```  